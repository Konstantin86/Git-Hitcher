app.directive("chatView",["appConst","authService","chatService",function(e,t,n){return{restrict:"E",scope:{options:"=",chats:"=",selected:"=",messages:"=",message:"="},templateUrl:"/app/directives/chatView.html",link:function(i,a,s,r,l){i.options||(i.options={visible:!0}),i.messages||(i.messages=[]);var o=function(){var e=$(".msg_container_base")[i.options.selected].scrollHeight;$(".msg_container_base")[i.options.selected].scrollTop=e};n.events.onMessageAdded(o),i.minimize=function(){var e=$(".panel-heading span.icon_minim");e.hasClass("panel-collapsed")?(e.parents(".panel").find(".panel-body").slideDown(),e.removeClass("panel-collapsed"),e.removeClass("glyphicon-plus").addClass("glyphicon-minus")):(e.parents(".panel").find(".panel-body").slideUp(),e.addClass("panel-collapsed"),e.removeClass("glyphicon-minus").addClass("glyphicon-plus"))},i.close=function(){i.options.visible=!1};var p=function(){if(i.message){var a=t.userData.photoPath||e.cdnMediaBase+"default_avatar.png";a=a.split("?width")[0]+"?width="+e.chatPhotoWidth,n.send(i.message,t.userData.userName||"аноним",a),i.message=""}};i.keyPress=function(e){13===e&&p()},i.send=p,$("#myDiv").draggable()}}}]),app.directive("disableAnimation",["$animate",function(e){return{restrict:"A",link:function(t,n,i){i.$observe("disableAnimation",function(t){e.enabled(!t,n)})}}}]),app.directive("formatPhone",[function(){return{require:"ngModel",restrict:"A",link:function(e){e.$watch("formData.phoneNumber",function(t,n){if(t){t=t.replace(new RegExp("-","g"),"");var i=String(t).split("");if(0!==i.length&&(1!==i.length||"-"!=i[0]&&"."!==i[0])&&(2!==i.length||"-."!==t)){isNaN(t)&&(e.formData.phoneNumber=n);var a=t.replace(/[^\w\s]/gi,"");if(10===a.length){var s=a.replace(/(.{3})/g,"$1-"),r=s.slice(0,-2)+s.slice(-1);e.formData.phoneNumber=r}}}})}}}]),app.directive("numberOnlyInput",function(){return{restrict:"EA",template:'<input name="{{inputName}}" ng-model="inputValue" ng-disabled="ngDisabled" min="1" max="10" type="number" class="form-control input-sm" />',scope:{inputValue:"=",ngDisabled:"=",inputName:"="},link:function(e){e.$watch("inputValue",function(t,n){var i=String(t).split("");0!==i.length&&(1!==i.length||"-"!=i[0]&&"."!==i[0])&&(2!==i.length||"-."!==t)&&isNaN(t)&&(e.inputValue=n)})}}}),app.directive("routeView",function(){return{restrict:"E",scope:{routeInfo:"=route"},templateUrl:"/app/directives/routeView.html"}}),app.directive("routeListView",function(){return{restrict:"E",scope:{routesInfo:"=routelist"},templateUrl:"/app/directives/routeListView.html"}});